@startuml

skinparam sequenceBoxBorderColor #black
skinparam NoteBorderColor #black

skinparam sequence {
    ArrowColor DarkBlue
    ActorBackgroundColor White
    ActorBorderColor black
    LifeLineBorderColor DarkBlue
    LifeLineBackgroundColor #A9DCDF
    BoxPadding 20
    ParticipantPadding 20
    ParticipantBorderColor Black
    ParticipantBackgroundColor White
}

autonumber "<b>[00] "
footer updated by Brian Savage 08/03/2021 \n all rights reservrd David's Bridal Inc.

title Appointment Reminder Text Message - Auto Check In - Happy Path | Version 2.0

box "TIME TRADE" #D4E1F5
participant "Time Trade Services" as TT_DATA
end box

box "DBI" #FFE9FE
participant "Data Services" as DBI_DATA
participant "API Services" as DBI_API
actor "DBI Stylist" as DBI_STY
end box

box "Liveperson" #FFF5E6
participant "Conversational Cloud" as LPCC
participant "Proactive Messaging API Service" as LPPM
end box

box "Twiliow" #FFCACA
participant "OPT OUT API Service" as TWAS
end box

actor "DBI Customer" as DBI_CUS
== 24 HOURS BEFORE THE APPOINTMENT ==

TT_DATA -> DBI_DATA : Send Appointment Data
note over TT_DATA,DBI_DATA #EEE
<b>APT Data Sent to DBI Data Services
- appointment information
end note

DBI_DATA -> DBI_API : Send Data
note over DBI_DATA #EEE
<b>APT Data Sent to API Services
- confirmation number
end note

DBI_API -> LPPM : send message
note over DBI_STY, LPCC #EEE
<b>Payload Sent to Proactive Messaging
- message content
- skill to be sent
- confirmation number
end note

LPPM -> TWAS : send message for OPT OUT Check
TWAS -> DBI_CUS : send message to customer

== SHE INTERACTS WITH BOT OR STYLIST ==

activate LPCC
LPCC <- DBI_CUS : she replies to text
LPCC <-> DBI_CUS : skill interacts with her
DBI_STY <-> LPCC : stylist to customer




== WHEN SHE ARRIVES AT THE STORE ON THE DAY OF HER APPOINTMENT ==

LPCC <- DBI_CUS : She Texts HERE
LPCC <- LPCC : Conversation Is Closed

DBI_API <- LPCC : Send Confirmation Number
deactivate LPCC
DBI_DATA <- DBI_API : Send Confirmation Number

TT_DATA <- DBI_DATA : Send Confirmation Number

TT_DATA <- TT_DATA : Check In Confirmation Number

TT_DATA -> DBI_DATA : Confirmation Text Sent

DBI_DATA -> DBI_API : Confirmation Text Sent

DBI_API -> LPPM : Confirmation Text Sent

LPPM -> TWAS : Confirmation Text Sent

TWAS -> DBI_CUS : Confirmation Text Sent to customer

@enduml